<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Lab 2 - Weather Forecasting Tools</title>
    <link rel="stylesheet" href="./shared/styles/common.css" />
    <link rel="stylesheet" href="./shared/styles/lab-styles.css" />
    <style>
      /* Lab 2 specific styles */
      .resources-section {
        background: #f0f4ff;
        border: 2px solid #667eea;
        border-radius: 10px;
        padding: 25px;
        margin-bottom: 30px;
      }

      .resource-category {
        margin-bottom: 20px;
      }

      .resource-category h3 {
        color: #444;
        font-size: 1em;
        margin-bottom: 10px;
        font-weight: 600;
      }

      .resources-section ul {
        list-style: none;
        padding-left: 0;
        margin-left: 20px;
      }

      .resources-section li {
        margin-bottom: 8px;
        position: relative;
        padding-left: 20px;
      }

      .resources-section li:before {
        content: "‚Üí";
        position: absolute;
        left: 0;
        color: #667eea;
        font-weight: bold;
      }

      .resources-section a {
        color: #667eea;
        text-decoration: none;
        transition: color 0.3s ease;
        font-weight: 500;
      }

      .resources-section a:hover {
        color: #764ba2;
        text-decoration: underline;
      }

      .quick-links {
        background: #e8f0fe;
        border-left: 3px solid #4285f4;
        padding: 10px 15px;
        margin-bottom: 15px;
        border-radius: 5px;
      }

      .quick-links-title {
        font-weight: 600;
        color: #333;
        font-size: 0.9em;
        margin-bottom: 8px;
        display: block;
      }

      .quick-link-btn {
        display: inline-block;
        background: #4285f4;
        color: white;
        padding: 6px 12px;
        border-radius: 5px;
        text-decoration: none;
        font-size: 0.85em;
        margin-right: 8px;
        margin-bottom: 5px;
        transition: background 0.3s ease;
      }

      .quick-link-btn:hover {
        background: #357ae8;
      }

      .url-input-group {
        margin-bottom: 10px;
      }

      .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 30px;
        font-size: 0.95em;
        line-height: 1.6;
      }

      /* Make URL input boxes wider for better visibility */
      input[type="url"] {
        max-width: 100%;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div
      class="progress-indicator"
      style="
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        background: rgba(255, 255, 255, 0.98);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        padding: 8px 0;
      "
    >
      <div
        class="progress-bar"
        style="width: 100%; height: 8px; background: #e0e0e0; overflow: hidden"
      >
        <div
          class="progress-fill"
          id="progressFill"
          style="
            height: 8px;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            width: 0%;
            transition: width 0.3s ease;
            display: block;
          "
        ></div>
      </div>
    </div>

    <div class="container">
      <div class="header">
        <h1>üå§Ô∏è Lab 2: Weather Forecasting Tools</h1>
        <p>Exploring Current Weather Resources and Data (30 Points)</p>
      </div>

      <div class="content">
        <!-- For This Lab Section -->
        <div class="section">
          <h2>üìã For This Lab</h2>
          <div class="info-box" style="background: #e3f2fd; border-left: 4px solid #2196F3; padding: 20px; border-radius: 8px; margin-bottom: 25px;">
            <h3 style="margin-top: 0; margin-bottom: 15px; color: #1976d2; font-size: 1.1em;">Instructions</h3>
            <ol style="margin: 0; padding-left: 25px; line-height: 2;">
              <li>Explore the various weather forecasting websites and tools</li>
              <li>Complete all URL collection and analysis sections</li>
              <li>Monitor your progress using the progress bar at the top of the page</li>
              <li>Your work is automatically saved as you type</li>
              <li>When complete, click <strong>"Download file for Canvas Submission"</strong></li>
              <li>Locate the downloaded file (<em>Lab02_WeatherData.txt</em>) and upload it to Canvas</li>
            </ol>
            <p style="margin-top: 15px; margin-bottom: 0; font-size: 0.95em; color: #555;">
              <strong>üí° Tip:</strong> Take time to explore each weather resource thoroughly. Understanding these tools is essential for meteorology.
            </p>
          </div>
        </div>

        <!-- Introduction Section -->
        <div class="section">
          <h2>üìö Introduction</h2>
          <div class="intro-box">
            <p>
              Modern weather forecasting relies on a vast network of observations,
              satellite imagery, computer models, and real-time data analysis.
              Understanding how to access and interpret these resources is essential
              for any student of atmospheric science.
            </p>
            <p>
              In this lab, you will explore various weather forecasting tools and
              resources available online. You'll learn to navigate professional
              weather websites, interpret different types of weather data, and
              understand how meteorologists use these tools to make predictions.
            </p>
          </div>
        </div>

      <div class="content">
        <p class="subtitle">
          This lab introduces weather analysis and forecasting tools available
          on the internet. For each item below, paste a direct link to the
          required weather product and add a brief caption. <br />
          If you'd like to open the lab in it's own window, click here:
          <a
            href="https://wxfreekj.github.io/Lab2/"
            target="_blank"
            rel="noopener"
            >Lab 2: Weather Forecasting Tools</a
          >
          (External link)
        </p>

        <div class="resources-section">
          <h2 style="color: #333; margin-bottom: 15px; font-size: 1.3em">
            üå¶Ô∏è Weather Forecasting Sites
          </h2>

          <div class="resource-category">
            <h3>
              Websites with Various Data Types (Radar, Satellites, Models,
              etc.):
            </h3>
            <ul>
              <li>
                <a
                  href="https://weather.rap.ucar.edu/"
                  target="_blank"
                  rel="noopener"
                  >RAP Weather Data ‚Äì UCAR</a
                >
              </li>
              <li>
                <a
                  href="https://weather.cod.edu/"
                  target="_blank"
                  rel="noopener"
                  >College of DuPage NexLab</a
                >
              </li>
            </ul>
          </div>

          <div class="resource-category">
            <h3>Forecasts with Human Input:</h3>
            <ul>
              <li>
                <a
                  href="https://www.weather.gov/"
                  target="_blank"
                  rel="noopener"
                  >National Weather Service (NWS)</a
                >
              </li>
              <li>
                <a
                  href="https://www.spc.noaa.gov/"
                  target="_blank"
                  rel="noopener"
                  >Storm Prediction Center (SPC) ‚Äì Severe Weather</a
                >
              </li>
              <li>
                <a
                  href="https://www.wpc.ncep.noaa.gov/"
                  target="_blank"
                  rel="noopener"
                  >Weather Prediction Center (WPC) ‚Äì Winter/Precipitation</a
                >
              </li>
              <li>
                <a
                  href="https://www.nhc.noaa.gov/"
                  target="_blank"
                  rel="noopener"
                  >National Hurricane Center (NHC) ‚Äì Tropical</a
                >
              </li>
            </ul>
          </div>

          <div class="resource-category">
            <h3>Numerical Weather Model Forecasts:</h3>
            <ul>
              <li>
                <a
                  href="https://mag.ncep.noaa.gov/"
                  target="_blank"
                  rel="noopener"
                  >Model Analyses and Guidance ‚Äì NOAA</a
                >
              </li>
              <li>
                <a
                  href="https://www.spc.noaa.gov/exper/sref/"
                  target="_blank"
                  rel="noopener"
                  >SPC Short-Range Ensemble Forecasts (SREF)</a
                >
              </li>
              <li>
                <a
                  href="http://www.twisterdata.com/"
                  target="_blank"
                  rel="noopener"
                  >TwisterData ‚Äì Weather Model Visualizations</a
                >
              </li>
            </ul>
          </div>

          <h2 style="color: #333; margin: 25px 0 15px 0; font-size: 1.3em">
            üå°Ô∏è Climate Resources
          </h2>
          <ul>
            <li>
              <a
                href="https://www.cpc.ncep.noaa.gov/"
                target="_blank"
                rel="noopener"
                >Climate Prediction Center (CPC)</a
              >
            </li>
            <li>
              <a
                href="https://droughtmonitor.unl.edu/"
                target="_blank"
                rel="noopener"
                >U.S. Drought Monitor</a
              >
            </li>
            <li>
              <a
                href="https://www.nhc.noaa.gov/climo/"
                target="_blank"
                rel="noopener"
                >NHC Hurricane Climatology</a
              >
            </li>
            <li>
              <a
                href="https://www.spc.noaa.gov/climo/"
                target="_blank"
                rel="noopener"
                >SPC Severe Weather Climatology</a
              >
            </li>
            <li>
              <a
                href="https://www.nssl.noaa.gov/hazard/"
                target="_blank"
                rel="noopener"
                >NSSL Hazardous Weather Climatology</a
              >
            </li>
            <li>
              <a
                href="https://www.spc.noaa.gov/new/SVRclimo/climo.php?parm=anySvr"
                target="_blank"
                rel="noopener"
                >SPC Severe Weather Climatology Maps</a
              >
            </li>
          </ul>

          <h2 style="color: #333; margin: 25px 0 15px 0; font-size: 1.3em">
            üìç Omaha Area Climatology
          </h2>
          <ul>
            <li>
              <a
                href="https://www.weather.gov/oax/climate"
                target="_blank"
                rel="noopener"
                >NWS Omaha/Valley Climate Data</a
              >
            </li>
          </ul>
        </div>

        <form id="weatherForm">
          <!-- Item 1 -->
          <div class="section">
            <h3>Question 1: Satellite Image ‚Äì Minnesota (3 pts)</h3>
            <p>
              <strong>Instructions:</strong> Find a recent satellite image
              showing cloud cover centered on Minnesota. A visible or infrared
              satellite product is acceptable.
            </p>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <a
                href="https://weather.cod.edu/"
                target="_blank"
                class="quick-link-btn"
                >College of DuPage</a
              >
              <a
                href="https://weather.rap.ucar.edu/"
                target="_blank"
                class="quick-link-btn"
                >RAP Weather Data</a
              >
            </div>
            <div class="form-group">
              <label for="link1">Image Link:</label>
              <input
                type="url"
                id="link1"
                name="link1"
                placeholder="https://example.com/satellite-image"
              />
            </div>
            <div class="form-group">
              <label for="caption1">Caption:</label>
              <textarea
                id="caption1"
                name="caption1"
                placeholder="Describe what the image shows..."
              ></textarea>
            </div>
          </div>

          <!-- Item 2 -->
          <div class="section">
            <h3>Question 2: Radar Image ‚Äì Chicago (3 pts)</h3>
            <p>
              <strong>Instructions:</strong> Locate a recent weather radar image
              centered on Chicago, Illinois. A base reflectivity product is
              preferred.
            </p>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <a
                href="https://weather.cod.edu/"
                target="_blank"
                class="quick-link-btn"
                >College of DuPage</a
              >
              <a
                href="https://weather.rap.ucar.edu/"
                target="_blank"
                class="quick-link-btn"
                >RAP Weather Data</a
              >
            </div>
            <div class="form-group">
              <label for="link2">Image Link:</label>
              <input
                type="url"
                id="link2"
                name="link2"
                placeholder="https://example.com/radar-image"
              />
            </div>
            <div class="form-group">
              <label for="caption2">Caption:</label>
              <textarea
                id="caption2"
                name="caption2"
                placeholder="Describe what the image shows..."
              ></textarea>
            </div>
          </div>

          <!-- Item 3 -->
          <div class="section">
            <h3>Question 3: Surface Observations ‚Äì Kansas (3 pts)</h3>
            <p>
              <strong>Instructions:</strong> Submit a surface weather map
              showing observations over Kansas. Look for maps that include
              temperatures, wind barbs, and circles that are filled in to a
              varying degree.
            </p>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <a
                href="https://weather.cod.edu/"
                target="_blank"
                class="quick-link-btn"
                >College of DuPage</a
              >
              <a
                href="https://weather.rap.ucar.edu/"
                target="_blank"
                class="quick-link-btn"
                >RAP Weather Data</a
              >
            </div>
            <div class="form-group">
              <label for="link3">Image Link:</label>
              <input
                type="url"
                id="link3"
                name="link3"
                placeholder="https://example.com/surface-map"
              />
            </div>
            <div class="form-group">
              <label for="caption3">Caption:</label>
              <textarea
                id="caption3"
                name="caption3"
                placeholder="Describe what the image shows..."
              ></textarea>
            </div>
          </div>

          <!-- Item 4 -->
          <div class="section">
            <h3>Question 4: 7-Day Forecast ‚Äì Fargo, ND (3 pts)</h3>
            <p>
              <strong>Instructions:</strong> Copy the full text of the 7-day
              National Weather Service forecast for Fargo, North Dakota. Be sure
              to include all seven days.
            </p>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Source:</span>
              <a
                href="https://www.weather.gov/"
                target="_blank"
                class="quick-link-btn"
                >National Weather Service</a
              >
            </div>
            <div class="form-group">
              <label for="link4">Forecast Link:</label>
              <input
                type="url"
                id="link4"
                name="link4"
                placeholder="https://example.com/fargo-forecast"
              />
            </div>
            <div class="form-group">
              <label for="caption4">7-Day Forecast Text:</label>
              <textarea
                id="caption4"
                name="caption4"
                placeholder="Paste the complete 7-day forecast here..."
                rows="6"
              ></textarea>
            </div>
          </div>

          <!-- Item 5 -->
          <div class="section">
            <h3>Question 5: SPC Day 2 Outlook (3 pts)</h3>
            <p>
              <strong>Instructions:</strong> Provide an image of the Storm
              Prediction Center's Day 2 Convective Outlook map. This shows areas
              at risk for severe weather tomorrow.
            </p>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Source:</span>
              <a
                href="https://www.spc.noaa.gov/"
                target="_blank"
                class="quick-link-btn"
                >Storm Prediction Center</a
              >
            </div>
            <div class="form-group">
              <label for="link5">Image Link:</label>
              <input
                type="url"
                id="link5"
                name="link5"
                placeholder="https://example.com/spc-outlook"
              />
            </div>
            <div class="form-group">
              <label for="caption5">Caption:</label>
              <textarea
                id="caption5"
                name="caption5"
                placeholder="Describe what the image shows..."
              ></textarea>
            </div>
          </div>

          <!-- Item 6 -->
          <div class="section">
            <h3>Question 6: WPC QPF Forecast (3 pts)</h3>
            <p>
              <strong>Instructions:</strong> Link to a Weather Prediction Center
              Quantitative Precipitation Forecast (QPF) map for any time period
              (e.g., 6-hr, 24-hr, or 7-day total).
            </p>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Source:</span>
              <a
                href="https://www.wpc.ncep.noaa.gov/"
                target="_blank"
                class="quick-link-btn"
                >Weather Prediction Center</a
              >
            </div>
            <div class="form-group">
              <label for="link6">Image Link:</label>
              <input
                type="url"
                id="link6"
                name="link6"
                placeholder="https://example.com/qpf-forecast"
              />
            </div>
            <div class="form-group">
              <label for="caption6">Caption:</label>
              <textarea
                id="caption6"
                name="caption6"
                placeholder="Describe what the image shows..."
              ></textarea>
            </div>
          </div>

          <!-- Item 7 -->
          <div class="section">
            <h3>Question 7: Ensemble Forecast Probability (3 pts)</h3>
            <p>
              <strong>Instructions:</strong> Find an ensemble model forecast map
              showing the probability of snowfall or precipitation for a region
              in the U.S.
            </p>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <a
                href="https://www.spc.noaa.gov/exper/sref/"
                target="_blank"
                class="quick-link-btn"
                >SPC SREF</a
              >
              <a
                href="https://weather.cod.edu/"
                target="_blank"
                class="quick-link-btn"
                >College of DuPage</a
              >
            </div>
            <div class="form-group">
              <label for="link7">Image Link:</label>
              <input
                type="url"
                id="link7"
                name="link7"
                placeholder="https://example.com/ensemble-forecast"
              />
            </div>
            <div class="form-group">
              <label for="caption7">Caption:</label>
              <textarea
                id="caption7"
                name="caption7"
                placeholder="Describe what the image shows..."
              ></textarea>
            </div>
          </div>

          <!-- Item 8 -->
          <div class="section">
            <h3>Question 8: Model Precipitation Forecast (3 pts)</h3>
            <p>
              <strong>Instructions:</strong> Submit a precipitation forecast map
              from any weather model (e.g., GFS, NAM, ECMWF) for any region/time
              period.
            </p>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <a
                href="https://mag.ncep.noaa.gov/"
                target="_blank"
                class="quick-link-btn"
                >NOAA Model Guidance</a
              >
              <a
                href="http://www.twisterdata.com/"
                target="_blank"
                class="quick-link-btn"
                >TwisterData</a
              >
              <a
                href="https://weather.cod.edu/"
                target="_blank"
                class="quick-link-btn"
                >College of DuPage</a
              >
            </div>
            <div class="form-group">
              <label for="link8">Image Link:</label>
              <input
                type="url"
                id="link8"
                name="link8"
                placeholder="https://example.com/model-precipitation"
              />
            </div>
            <div class="form-group">
              <label for="caption8">Caption:</label>
              <textarea
                id="caption8"
                name="caption8"
                placeholder="Describe what the image shows..."
              ></textarea>
            </div>
          </div>

          <!-- Item 9 -->
          <div class="section">
            <h3>Question 9: 500 mb Heights and Winds ‚Äì Central U.S. (3 pts)</h3>
            <p>
              <strong>Instructions:</strong> Find a forecast map of 500 mb
              heights and winds covering the central U.S. Look for color
              contours and wind barbs.
            </p>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <a
                href="https://mag.ncep.noaa.gov/"
                target="_blank"
                class="quick-link-btn"
                >NOAA Model Guidance</a
              >
              <a
                href="https://weather.cod.edu/"
                target="_blank"
                class="quick-link-btn"
                >College of DuPage</a
              >
              <a
                href="http://www.twisterdata.com/"
                target="_blank"
                class="quick-link-btn"
                >TwisterData</a
              >
            </div>
            <div class="form-group">
              <label for="link9">Image Link:</label>
              <input
                type="url"
                id="link9"
                name="link9"
                placeholder="https://example.com/500mb-map"
              />
            </div>
            <div class="form-group">
              <label for="caption9">Caption:</label>
              <textarea
                id="caption9"
                name="caption9"
                placeholder="Describe what the image shows..."
              ></textarea>
            </div>
          </div>

          <!-- Item 10 -->
          <div class="section">
            <h3>Question 10: Visible Satellite ‚Äì Southeast U.S. (3 pts)</h3>
            <p>
              <strong>Instructions:</strong> Provide a daytime visible satellite
              image over the southeastern U.S. Ensure the image is from a time
              when the sun is up.
            </p>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <a
                href="https://weather.cod.edu/"
                target="_blank"
                class="quick-link-btn"
                >College of DuPage</a
              >
              <a
                href="https://weather.rap.ucar.edu/"
                target="_blank"
                class="quick-link-btn"
                >RAP Weather Data</a
              >
            </div>
            <div class="form-group">
              <label for="link10">Image Link:</label>
              <input
                type="url"
                id="link10"
                name="link10"
                placeholder="https://example.com/visible-satellite"
              />
            </div>
            <div class="form-group">
              <label for="caption10">Caption:</label>
              <textarea
                id="caption10"
                name="caption10"
                placeholder="Describe what the image shows..."
              ></textarea>
            </div>
          </div>

          <div class="button-container" style="display: flex; gap: 10px; flex-wrap: wrap; justify-content: center; margin-top: 30px;">
            <button type="button" class="download-btn" id="downloadBtn" style="flex: 1; min-width: 200px;">
              üì• Download file for Canvas Submission
            </button>
            <button type="button" class="clear-btn" id="clearBtn" style="flex: 1; min-width: 200px;">
              üóëÔ∏è Clear All Answers
            </button>
            <button
              type="button"
              class="help-btn"
              onclick="window.location.href='mailto:JMartinelli@peru.edu?subject=Lab 2 - Question/Feedback&body=Hi Dr. M,%0D%0A%0D%0AI have a question about Lab 2:%0D%0A%0D%0A'"
              style="flex: 1; min-width: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-size: 1em; font-weight: 600; transition: transform 0.2s, box-shadow 0.2s;"
              onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 16px rgba(102, 126, 234, 0.4)'"
              onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 8px rgba(0, 0, 0, 0.1)'"
            >
              ‚ùì Questions, concerns, feedback, or need help?
            </button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // Update progress indicator
      // Update progress indicator based on points
      function updateProgress() {
        let earnedPoints = 0;
        const totalPoints = 30; // 10 questions √ó 3 pts each
        const pointsPerQuestion = 3;

        for (let i = 1; i <= 10; i++) {
          const link = document.getElementById(`link${i}`).value.trim();
          const caption = document.getElementById(`caption${i}`).value.trim();
          if (link && caption) {
            earnedPoints += pointsPerQuestion;
          }
        }

        const percentage = (earnedPoints / totalPoints) * 100;
        document.getElementById("progressFill").style.width = percentage + "%";
      }

      // Add event listeners to all inputs
      document.querySelectorAll("input, textarea").forEach((element) => {
        element.addEventListener("input", updateProgress);
      });

      // Validation functions
      function validateUrl(input) {
        const value = input.value.trim();
        const urlPattern = /^https?:\/\/.+/i;

        if (!value) {
          input.style.borderColor = "#dc2626";
          input.style.backgroundColor = "#fef2f2";
          return false;
        } else if (!urlPattern.test(value)) {
          input.style.borderColor = "#dc2626";
          input.style.backgroundColor = "#fef2f2";
          return false;
        } else {
          input.style.borderColor = "";
          input.style.backgroundColor = "";
          return true;
        }
      }

      function validateTextarea(textarea) {
        const value = textarea.value.trim();
        const minLength = 20;

        if (!value) {
          textarea.style.borderColor = "#dc2626";
          textarea.style.backgroundColor = "#fef2f2";
          return false;
        } else if (value.length < minLength) {
          textarea.style.borderColor = "#dc2626";
          textarea.style.backgroundColor = "#fef2f2";
          return false;
        } else {
          textarea.style.borderColor = "";
          textarea.style.backgroundColor = "";
          return true;
        }
      }

      function validateAllInputs() {
        let isValid = true;
        let firstInvalid = null;
        const emptyLinks = [];
        const invalidLinks = [];
        const emptyCaptions = [];
        const shortCaptions = [];

        const items = [
          { title: "Satellite Image ‚Äì Minnesota", num: 1 },
          { title: "Radar Image ‚Äì Chicago", num: 2 },
          { title: "Surface Observations ‚Äì Kansas", num: 3 },
          { title: "7-Day Forecast ‚Äì Fargo, ND", num: 4 },
          { title: "SPC Day 2 Outlook", num: 5 },
          { title: "WPC QPF Forecast", num: 6 },
          { title: "Ensemble Forecast Probability", num: 7 },
          { title: "Model Precipitation Forecast", num: 8 },
          { title: "500 mb Heights and Winds ‚Äì Central U.S.", num: 9 },
          { title: "Visible Satellite ‚Äì Southeast U.S.", num: 10 },
        ];

        items.forEach((item) => {
          const linkInput = document.getElementById(`link${item.num}`);
          const captionTextarea = document.getElementById(`caption${item.num}`);
          const urlPattern = /^https?:\/\/.+/i;

          // Validate link
          const linkValue = linkInput.value.trim();
          if (!linkValue) {
            emptyLinks.push(item.num);
            linkInput.style.borderColor = "#dc2626";
            linkInput.style.backgroundColor = "#fef2f2";
            isValid = false;
            if (!firstInvalid) firstInvalid = linkInput;
          } else if (!urlPattern.test(linkValue)) {
            invalidLinks.push(item.num);
            linkInput.style.borderColor = "#dc2626";
            linkInput.style.backgroundColor = "#fef2f2";
            isValid = false;
            if (!firstInvalid) firstInvalid = linkInput;
          } else {
            linkInput.style.borderColor = "";
            linkInput.style.backgroundColor = "";
          }

          // Validate caption
          const captionValue = captionTextarea.value.trim();
          if (!captionValue) {
            emptyCaptions.push(item.num);
            captionTextarea.style.borderColor = "#dc2626";
            captionTextarea.style.backgroundColor = "#fef2f2";
            isValid = false;
            if (!firstInvalid) firstInvalid = captionTextarea;
          } else if (captionValue.length < 20) {
            shortCaptions.push(item.num);
            captionTextarea.style.borderColor = "#dc2626";
            captionTextarea.style.backgroundColor = "#fef2f2";
            isValid = false;
            if (!firstInvalid) firstInvalid = captionTextarea;
          } else {
            captionTextarea.style.borderColor = "";
            captionTextarea.style.backgroundColor = "";
          }
        });

        if (!isValid) {
          let message = "Please complete the following before downloading:\n\n";

          if (emptyLinks.length > 0) {
            message +=
              "Missing links for item(s): " + emptyLinks.join(", ") + "\n";
          }
          if (invalidLinks.length > 0) {
            message +=
              "Invalid URL format for item(s): " +
              invalidLinks.join(", ") +
              " (must start with http:// or https://)\n";
          }
          if (emptyCaptions.length > 0) {
            message +=
              "Missing captions for item(s): " +
              emptyCaptions.join(", ") +
              "\n";
          }
          if (shortCaptions.length > 0) {
            message +=
              "Caption(s) too short (need at least 20 characters) for item(s): " +
              shortCaptions.join(", ") +
              "\n";
          }

          alert(message);

          if (firstInvalid) {
            firstInvalid.scrollIntoView({
              behavior: "smooth",
              block: "center",
            });
            firstInvalid.focus();
          }
        }

        return isValid;
      }

      // Download functionality
      document
        .getElementById("downloadBtn")
        .addEventListener("click", function () {
          // Validate before downloading
          if (!validateAllInputs()) {
            return;
          }

          const items = [
            { title: "Satellite Image ‚Äì Minnesota", num: 1 },
            { title: "Radar Image ‚Äì Chicago", num: 2 },
            { title: "Surface Observations ‚Äì Kansas", num: 3 },
            { title: "7-Day Forecast ‚Äì Fargo, ND", num: 4 },
            { title: "SPC Day 2 Outlook", num: 5 },
            { title: "WPC QPF Forecast", num: 6 },
            { title: "Ensemble Forecast Probability", num: 7 },
            { title: "Model Precipitation Forecast", num: 8 },
            { title: "500 mb Heights and Winds ‚Äì Central U.S.", num: 9 },
            { title: "Visible Satellite ‚Äì Southeast U.S.", num: 10 },
          ];

          let content = "LAB 2: WEATHER FORECASTING TOOLS\n";
          content += "=" + "=".repeat(50) + "\n\n";
          content += "Date: " + new Date().toLocaleDateString() + "\n\n";
          content += "=" + "=".repeat(50) + "\n\n";

          items.forEach((item) => {
            const link = document
              .getElementById(`link${item.num}`)
              .value.trim();
            const caption = document
              .getElementById(`caption${item.num}`)
              .value.trim();

            content += `${item.num}. ${item.title}\n`;
            content += "-".repeat(50) + "\n";
            content += `Link: ${link || "[NOT PROVIDED]"}\n\n`;
            content += `Caption:\n${caption || "[NOT PROVIDED]"}\n\n`;
            content += "=" + "=".repeat(50) + "\n\n";
          });

          // Create and download file
          const blob = new Blob([content], { type: "text/plain" });
          const url = window.URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = "Lab02_WeatherData.txt";
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          window.URL.revokeObjectURL(url);

          alert("‚úÖ Assignment downloaded successfully!");
        });

      // Clear all fields
      document
        .getElementById("clearBtn")
        .addEventListener("click", function () {
          if (
            confirm(
              "Are you sure you want to clear all fields? This cannot be undone."
            )
          ) {
            document.getElementById("weatherForm").reset();
            updateProgress();
            alert("üóëÔ∏è All fields have been cleared.");
          }
        });

      // Initialize progress on page load
      updateProgress();
    </script>
  </body>
</html>
