<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, viewport-fit=cover"
    />
    <title>Lab 2 - Weather Forecasting Tools</title>

    <!-- Optional shared styles (kept for your project structure) -->
    <link rel="stylesheet" href="shared/styles/common.css" />
    <link rel="stylesheet" href="shared/styles/lab-styles.css" />

    <style>
      :root {
        --indigo: #667eea;
        --indigo-dark: #5a67d8;
        --purple: #764ba2;
        --google-blue: #4285f4;
        --surface: #f0f4ff;
        --surface-2: #e8f0fe;
        --ink-900: #1d263b;
        --ink-800: #23335a;
        --ink-700: #3a4a7a;
        --ink-600: #4d5c8e;
        --ink-500: #6a76a8;
        --danger: #dc2626;
        --radius: 12px;

        /* Mobile-first typography */
        --fs-h1: clamp(1.25rem, 2.2vw + 1rem, 1.75rem);
        --fs-h2: clamp(1.05rem, 1.8vw + 0.9rem, 1.25rem);
        --fs-body: clamp(0.95rem, 0.7vw + 0.8rem, 1rem);
        --fs-btn: clamp(0.95rem, 0.7vw + 0.8rem, 1rem);

        --pad-card: clamp(14px, 2vw, 20px);
        --pad-header-y: 14px;
        --hit-area: 44px; /* touch target minimum */
      }

      /* Page chrome */
      html,
      body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial,
          sans-serif;
        color: var(--ink-700);
        background: #fff;
        font-size: var(--fs-body);
        line-height: 1.5;
        -webkit-tap-highlight-color: transparent;
      }

      .container {
        max-width: 960px;
        margin: 80px auto 72px;
        padding: 0 16px;
      }

      .header h1 {
        margin: 0 0 6px 0;
        font-size: var(--fs-h1);
        color: var(--ink-100);
      }

      .header p {
        margin: 0;
        color: #c6c6c7;
        font-weight: 600;
        font-size: 0.98em;
      }

      /* Top progress bar */
      .progress-indicator {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 1000;
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: saturate(120%) blur(4px);
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        padding: 8px 0;
        padding-top: env(safe-area-inset-top);
      }
      .progress-bar {
        width: 100%;
        height: 8px;
        background: #e0e0e0;
        overflow: hidden;
      }
      .progress-fill {
        height: 8px;
        background: linear-gradient(
          90deg,
          var(--indigo) 0%,
          var(--purple) 100%
        );
        width: 0%;
        transition: width 0.3s ease;
        display: block;
      }

      /* Section wrapper */
      .section {
        margin: 0 0 16px 0;
      }

      /* Flat section title with underline */
      .section-title {
        margin: 0;
        padding: 0 0 10px 0;
        font-size: var(--fs-h2);
        font-weight: 800;
        color: #1f3b82;
        border: none;
        border-bottom: 2px solid var(--indigo);
        border-radius: 0 !important;
        box-shadow: none !important;
        background: transparent;
        display: block;
        width: 100%;
      }

      /* Collapsible blocks (cards) */
      .collapsible-container {
        border-radius: 12px;
        overflow: hidden;
        margin: 0 0 16px 0;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        background: var(--surface);
        border: 1px solid #dfe7ff;
      }

      .collapsible-header {
        margin: 0;
        padding: max(var(--pad-header-y), 12px) 48px
          max(var(--pad-header-y), 12px) var(--pad-card);
        cursor: pointer;
        user-select: none;
        position: relative;
        font-weight: 800;
        color: #1f3b82;
        background: var(--surface);
        min-height: var(--hit-area);
        display: flex;
        align-items: center;
      }
      .collapsible-header:hover {
        filter: brightness(0.98);
      }
      .collapsible-header::after {
        content: "‚ñº";
        position: absolute;
        right: 16px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 0.95em;
        color: #6a6a6a;
        transition: transform 0.2s ease;
      }
      .collapsible-header.is-collapsed::after {
        transform: translateY(-50%) rotate(-90deg);
      }

      .stripe-blue {
        border-left: 4px solid var(--google-blue);
      }
      .stripe-indigo {
        border-left: 4px solid var(--indigo);
      }

      .collapsible-content {
        display: block;
        background: var(--surface);
        padding: var(--pad-card);
        border-top: 1px solid #e5ecff;
      }
      .collapsible-content.is-collapsed {
        display: none;
      }

      /* Quick-links and buttons grid that reflows on mobile */
      .quick-links {
        background: var(--surface-2);
        border-left: 3px solid var(--google-blue);
        padding: 12px 14px;
        margin: 8px 0;
        border-radius: 10px;
      }
      .quick-links-title {
        font-weight: 800;
        color: #333;
        font-size: 0.98em;
        margin: 0 0 10px 0;
        display: block;
      }

      .link-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 10px;
      }

      .quick-link-btn {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background: linear-gradient(
          135deg,
          var(--google-blue) 0%,
          var(--indigo) 100%
        );
        color: #fff;
        padding: 12px 14px;
        border-radius: 12px;
        text-decoration: none;
        font-size: 0.95em;
        font-weight: 800;
        line-height: 1.25;
        min-height: 44px;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
        box-shadow: 0 2px 8px rgba(66, 133, 244, 0.2);
        border: none;
        text-align: center;
      }
      .quick-link-btn .hint-text {
        display: block;
        font-size: 0.8em;
        font-style: italic;
        opacity: 0.95;
        margin-top: 4px;
        font-weight: 600;
      }
      .quick-link-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 14px rgba(66, 133, 244, 0.28);
      }
      .quick-link-btn:active {
        transform: translateY(0);
        box-shadow: 0 2px 6px rgba(66, 133, 244, 0.2);
      }

      /* Resource lists */
      .resources-section {
        background: var(--surface);
      }
      .resources-section h2 {
        color: #333;
        margin: 8px 0 12px 0;
        font-size: 1.15rem;
      }
      .resource-category {
        margin-bottom: 14px;
      }
      .resource-category h3 {
        color: #444;
        font-size: 1rem;
        margin: 0 0 8px 0;
        font-weight: 800;
      }
      .resources-section ul {
        list-style: none;
        padding-left: 0;
        margin-left: 18px;
      }
      .resources-section li {
        margin-bottom: 8px;
        position: relative;
        padding-left: 18px;
      }
      .resources-section li:before {
        content: "‚Üí";
        position: absolute;
        left: 0;
        color: var(--indigo);
        font-weight: 900;
      }
      .resources-section a {
        color: var(--indigo);
        text-decoration: none;
        font-weight: 800;
      }
      .resources-section a:hover {
        text-decoration: underline;
        color: var(--indigo-dark);
      }

      /* Forms */
      input[type="url"],
      textarea {
        width: 100%;
        max-width: 100%;
        padding: 12px 14px;
        border: 1px solid #c9d4ff;
        border-radius: 10px;
        font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial,
          sans-serif; /* 16px avoids iOS zoom */
        box-sizing: border-box;
        background: #fff;
      }
      textarea {
        min-height: 110px;
        resize: vertical;
      }
      .is-invalid {
        border-color: var(--danger) !important;
        background: #fef2f2 !important;
      }
      input:focus-visible,
      textarea:focus-visible {
        outline: 2px solid var(--indigo);
        outline-offset: 2px;
      }

      /* Bottom buttons */
      .button-row {
        display: grid;
        grid-template-columns: 1fr;
        gap: 10px;
        justify-content: center;
        margin: 28px 0;
      }
      @media (min-width: 700px) {
        .button-row {
          grid-template-columns: repeat(3, minmax(220px, 1fr));
        }
      }
      .btn {
        padding: 14px 18px;
        border-radius: 12px;
        font-weight: 900;
        font-size: var(--fs-btn);
        border: none;
        cursor: pointer;
        transition: transform 0.15s ease, box-shadow 0.15s ease;
        min-height: 44px;
      }
      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
      }
      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--indigo) 0%,
          var(--purple) 100%
        );
        color: #fff;
      }
      .btn-ghost {
        background: #f7f7ff;
        border: 1px solid #d9dfff;
        color: #2b2c65;
      }

      .muted {
        font-size: 0.95em;
        color: #555;
        margin: 14px 0 0 0;
      }

      /* Motion preferences */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation: none !important;
          transition: none !important;
        }
      }

      /* Responsive container spacing */
      @media (max-width: 900px) {
        .container {
          margin-top: 76px;
        }
      }
      @media (max-width: 700px) {
        .container {
          padding: 0 12px;
        }
        .collapsible-container {
          border-radius: 10px;
        }
      }
      @media (max-width: 480px) {
        .container {
          margin-bottom: 84px;
        }
        .collapsible-header {
          padding-left: 14px;
          padding-right: 42px;
        }
        .quick-link-btn {
          min-height: 44px;
        }
      }
    </style>
  </head>
  <body>
    <!-- progress -->
    <div class="progress-indicator">
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>

    <div class="container">
      <div class="header">
        <h1>üå§Ô∏è Lab 2: Weather Forecasting Tools</h1>
        <p>Exploring Current Weather Resources and Data (30 Points)</p>
      </div>

      <!-- For This Lab (collapsible) -->
      <div class="section">
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-indigo"
            onclick="toggleCollapsible(this)"
          >
            üìã For this Lab
          </div>
          <div class="collapsible-content">
            <ol style="margin: 0; padding-left: 22px; line-height: 1.9">
              <li>
                Explore the various weather forecasting websites and tools
              </li>
              <li>Complete all URL collection and analysis sections</li>
              <li>
                Monitor your progress using the progress bar at the top of the
                page
              </li>
              <li>Your work is automatically saved as you type</li>
              <li>
                When complete, click
                <strong>"Download file for Canvas Submission"</strong>
              </li>
              <li>
                Locate <em>Lab02_WeatherData.txt</em> and upload it to Canvas
              </li>
            </ol>
            <p class="muted">
              <strong>üí° Tip:</strong> Take time to explore each weather
              resource thoroughly. Understanding these tools is essential for
              meteorology.
            </p>
          </div>
        </div>
      </div>

      <!-- Introduction -->
      <div class="section">
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-indigo"
            onclick="toggleCollapsible(this)"
          >
            üìö Introduction
          </div>
          <div class="collapsible-content">
            <p>
              Modern weather forecasting relies on a vast network of
              observations, satellite imagery, computer models, and real-time
              data analysis. Understanding how to access and interpret these
              resources is essential for any student of atmospheric science.
            </p>
            <p>
              In this lab, you will explore various weather forecasting tools
              and resources available online. You'll learn to navigate
              professional weather websites, interpret different types of
              weather data, and understand how meteorologists use these tools to
              make predictions.
            </p>
            <p>
              By the end of this lab, you should feel comfortable using key
              weather websites and resources to gather information about current
              weather conditions and forecasts.
            </p>
          </div>
        </div>
      </div>

      <!-- Resources -->
      <div class="section">
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-indigo"
            onclick="toggleCollapsible(this)"
          >
            üìö Resources
          </div>
          <div class="collapsible-content resources-section">
            <h2>üå¶Ô∏è Weather Forecasting Sites</h2>

            <div class="resource-category">
              <h3>
                Websites with Various Data Types (Radar, Satellites, Models,
                etc.)
              </h3>
              <ul>
                <li>
                  <a
                    href="https://weather.rap.ucar.edu/"
                    target="_blank"
                    rel="noopener"
                    >RAP Weather Data ‚Äì UCAR</a
                  >
                </li>
                <li>
                  <a
                    href="https://weather.cod.edu/"
                    target="_blank"
                    rel="noopener"
                    >College of DuPage NexLab</a
                  >
                </li>
                <li>
                  <a
                    href="https://www.goes.noaa.gov/"
                    target="_blank"
                    rel="noopener"
                    >GOES Imagery</a
                  >
                </li>
              </ul>
            </div>

            <div class="resource-category">
              <h3>Forecasts with Human Input</h3>
              <ul>
                <li>
                  <a
                    href="https://www.weather.gov/"
                    target="_blank"
                    rel="noopener"
                    >National Weather Service (NWS)</a
                  >
                </li>
                <li>
                  <a
                    href="https://www.spc.noaa.gov/"
                    target="_blank"
                    rel="noopener"
                    >Storm Prediction Center (SPC) ‚Äì Severe Weather</a
                  >
                </li>
                <li>
                  <a
                    href="https://www.wpc.ncep.noaa.gov/"
                    target="_blank"
                    rel="noopener"
                    >Weather Prediction Center (WPC) ‚Äì Winter/Precipitation</a
                  >
                </li>
                <li>
                  <a
                    href="https://www.nhc.noaa.gov/"
                    target="_blank"
                    rel="noopener"
                    >National Hurricane Center (NHC) ‚Äì Tropical</a
                  >
                </li>
              </ul>
            </div>

            <div class="resource-category">
              <h3>Numerical Weather Model Forecasts</h3>
              <ul>
                <li>
                  <a
                    href="https://mag.ncep.noaa.gov/"
                    target="_blank"
                    rel="noopener"
                    >Model Analyses and Guidance ‚Äì NOAA</a
                  >
                </li>
                <li>
                  <a
                    href="https://www.spc.noaa.gov/exper/sref/"
                    target="_blank"
                    rel="noopener"
                    >SPC Short-Range Ensemble Forecasts (SREF)</a
                  >
                </li>
                <li>
                  <a
                    href="https://www.twisterdata.com/"
                    target="_blank"
                    class="quick-link-btn"
                    rel="noopener"
                    href="https://www.twisterdata.com/"
                    target="_blank"
                    class="quick-link-btn"
                    rel="noopener"
                    >TwisterData ‚Äì Weather Model Visualizations</a
                  >
                </li>
              </ul>
            </div>

            <h2 style="margin-top: 10px">üå°Ô∏è Climate Resources</h2>
            <ul>
              <li>
                <a
                  href="https://www.cpc.ncep.noaa.gov/"
                  target="_blank"
                  rel="noopener"
                  >Climate Prediction Center (CPC)</a
                >
              </li>
              <li>
                <a
                  href="https://droughtmonitor.unl.edu/"
                  target="_blank"
                  rel="noopener"
                  >U.S. Drought Monitor</a
                >
              </li>
              <li>
                <a
                  href="https://www.nhc.noaa.gov/climo/"
                  target="_blank"
                  rel="noopener"
                  >NHC Hurricane Climatology</a
                >
              </li>
              <li>
                <a
                  href="https://www.spc.noaa.gov/climo/"
                  target="_blank"
                  rel="noopener"
                  >SPC Severe Weather Climatology</a
                >
              </li>
              <li>
                <a
                  href="https://www.nssl.noaa.gov/hazard/"
                  target="_blank"
                  rel="noopener"
                  >NSSL Hazardous Weather Climatology</a
                >
              </li>
              <li>
                <a
                  href="https://www.spc.noaa.gov/new/SVRclimo/climo.php?parm=anySvr"
                  target="_blank"
                  rel="noopener"
                  >SPC Severe Weather Climatology Maps</a
                >
              </li>
            </ul>

            <h2 style="margin-top: 10px">üìç Omaha Area Climatology</h2>
            <ul>
              <li>
                <a
                  href="https://www.weather.gov/oax/climate"
                  target="_blank"
                  rel="noopener"
                  >NWS Omaha/Valley Climate Data</a
                >
              </li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Lab Overview -->
      <div class="section">
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-indigo"
            onclick="toggleCollapsible(this)"
          >
            Lab Overview
          </div>
          <div class="collapsible-content">
            <strong
              >This lab introduces weather analysis and forecasting tools
              available on the internet. I expect you'll need to click around
              and dig into each source to find what you need.</strong
            >
          </div>
        </div>
      </div>

      <!-- Info Box -->
      <div class="section">
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-indigo"
            onclick="toggleCollapsible(this)"
          >
            üå¶Ô∏è Why Different Weather Imagery Matters to Forecasters
          </div>
          <div class="collapsible-content">
            <div style="display: grid; gap: 14px">
              <div
                style="
                  border-left: 3px solid var(--google-blue);
                  padding-left: 12px;
                "
              >
                <strong>üì° Satellite Imagery:</strong>
                <ul style="margin: 6px 0 0 18px; line-height: 1.6">
                  <li>
                    <strong>Infrared:</strong> Shows cloud-top temperatures,
                    helping identify storm intensity and height
                  </li>
                  <li>
                    <strong>Visible:</strong> Reveals cloud textures and
                    structures only visible during daylight
                  </li>
                  <li>
                    <strong>Water Vapor:</strong> Tracks atmospheric moisture
                    and jet stream patterns
                  </li>
                </ul>
              </div>

              <div style="border-left: 3px solid #34a853; padding-left: 12px">
                <strong>üìä Radar Data:</strong>
                <ul style="margin: 6px 0 0 18px; line-height: 1.6">
                  <li>
                    <strong>Base Reflectivity:</strong> Shows precipitation
                    intensity and storm structure
                  </li>
                  <li>
                    <strong>Velocity:</strong> Reveals wind patterns and
                    rotation within storms
                  </li>
                  <li>
                    <strong>Dual-Pol:</strong> Identifies precipitation type
                    (rain, snow, hail)
                  </li>
                </ul>
              </div>

              <div style="border-left: 3px solid #ea4335; padding-left: 12px">
                <strong>üå°Ô∏è Surface Observations:</strong>
                <ul style="margin: 6px 0 0 18px; line-height: 1.6">
                  <li>
                    <strong>Station Models:</strong> Provide real-time
                    temperature, pressure, and wind data
                  </li>
                  <li>
                    <strong>Weather Patterns:</strong> Help identify fronts,
                    pressure systems, and local conditions
                  </li>
                  <li>
                    <strong>Verification:</strong> Allow forecasters to verify
                    model accuracy
                  </li>
                </ul>
              </div>

              <div style="border-left: 3px solid #fbbc04; padding-left: 12px">
                <strong>üîÆ Model Forecasts:</strong>
                <ul style="margin: 6px 0 0 18px; line-height: 1.6">
                  <li>
                    <strong>Numerical Models:</strong> Predict future weather
                    conditions using complex algorithms
                  </li>
                  <li>
                    <strong>Ensemble Forecasts:</strong> Show probability and
                    uncertainty in predictions
                  </li>
                  <li>
                    <strong>Upper-Air Data:</strong> Reveal atmospheric patterns
                    that drive surface weather
                  </li>
                </ul>
              </div>
            </div>

            <div class="quick-links" style="margin-top: 14px">
              <strong>üí° Professional Tip:</strong> Meteorologists never rely on
              just one data source. They combine satellite, radar, surface
              observations, and model data to create the most accurate forecast
              possible. Each tells a different part of the atmospheric story!
            </div>
          </div>
        </div>
      </div>

      <!-- FORM -->
      <form id="weatherForm">
        <!-- helper: quick-link grid wrapper -->
        <template id="gridTemplate"></template>

        <!-- Q1 -->
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-blue"
            onclick="toggleCollapsible(this)"
          >
            Question 1: Satellite Image (3 pts)
          </div>
          <div class="collapsible-content">
            <div style="padding-bottom: 8px">
              <strong>Instructions:</strong> Locate a recent infrared satellite
              image over an interesting weather event/phenomenon.
            </div>
            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <div class="link-grid">
                <a
                  href="https://pivotalweather.com"
                  target="_blank"
                  class="quick-link-btn"
                  >Pivotal Weather<span class="hint-text"
                    >GOES Satellite</span
                  ></a
                >
                <a
                  href="https://weather.cod.edu/"
                  target="_blank"
                  class="quick-link-btn"
                  >College of DuPage<span class="hint-text"
                    >Satellite & Radar</span
                  ></a
                >
                <a
                  href="https://www.goes.noaa.gov/"
                  target="_blank"
                  class="quick-link-btn"
                  >GOES Imagery<span class="hint-text">Menu on Left</span></a
                >
              </div>
            </div>
            <div style="padding-bottom: 8px">
              <strong>Instructions:</strong> Locate a recent weather radar image
              over an interesting weather event/phenomenon. A base reflectivity
              product is preferred.
            </div>
            <div style="padding: 6px 0">
              <input
                type="url"
                id="link1"
                name="link1"
                placeholder="Paste a link to the image"
              />
            </div>
            <div style="padding: 6px 0">
              <textarea
                id="caption1"
                name="caption1"
                placeholder="Describe the infrared satellite image: What does an infrared satellite image see? What is interesting about this picture?"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Q2 -->
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-blue"
            onclick="toggleCollapsible(this)"
          >
            Question 2: Radar Image (3 pts)
          </div>
          <div class="collapsible-content">
            <div style="padding-bottom: 8px">
              <strong>Instructions:</strong> Locate a recent weather radar image
              over an interesting weather event/phenomenon. A base reflectivity
              product is preferred.
            </div>

            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <div class="link-grid">
                <a
                  href="https://pivotalweather.com"
                  target="_blank"
                  class="quick-link-btn"
                  >Pivotal Weather<span class="hint-text">NWS Radar</span></a
                >
                <a
                  href="https://weather.cod.edu/"
                  target="_blank"
                  class="quick-link-btn"
                  >College of DuPage<span class="hint-text">NEXRAD</span></a
                >
                <a
                  href="https://radar.weather.gov"
                  target="_blank"
                  class="quick-link-btn"
                  >NWS Official Radar</a
                >
              </div>
            </div>

            <div style="padding: 6px 0">
              <input
                type="url"
                id="link2"
                name="link2"
                placeholder="Paste a link to the image"
              />
            </div>
            <div style="padding: 6px 0">
              <textarea
                id="caption2"
                name="caption2"
                placeholder="Describe the radar image: What type of precipitation is shown? What weather patterns or storm structures do you observe? What time period does this cover? "
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Q3 -->
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-blue"
            onclick="toggleCollapsible(this)"
          >
            Question 3: Surface Observations ‚Äì Kansas (3 pts)
          </div>
          <div class="collapsible-content">
            <p>
              <strong>Instructions:</strong> Submit a surface weather map
              showing observations over <b>Kansas</b>. Look for maps that
              include temperatures, wind barbs, and circles that are filled in
              to a varying degree.
            </p>

            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <div class="link-grid">
                <a
                  href="https://pivotalweather.com"
                  target="_blank"
                  class="quick-link-btn"
                  >Pivotal Weather<span class="hint-text"
                    >Surface Analysis</span
                  ></a
                >
                <a
                  href="https://weather.cod.edu/"
                  target="_blank"
                  class="quick-link-btn"
                  >College of DuPage<span class="hint-text"
                    >Surface Data</span
                  ></a
                >
                <a
                  href="https://weather.gov"
                  target="_blank"
                  class="quick-link-btn"
                  >Local Observations</a
                >
              </div>
            </div>

            <div style="padding: 6px 0">
              <input
                type="url"
                id="link3"
                name="link3"
                placeholder="Paste a link to the image"
              />
            </div>
            <div style="padding: 6px 0">
              <textarea
                id="caption3"
                name="caption3"
                placeholder="Describe the surface observations: What are the temperature patterns across Kansas? What do the wind barbs show about wind direction and speed? How do the station model symbols indicate current weather conditions?"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Q4 -->
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-blue"
            onclick="toggleCollapsible(this)"
          >
            Question 4: 7-Day Forecast - Your hometown (3 pts)
          </div>
          <div class="collapsible-content">
            <p>
              <strong>Instructions:</strong> Copy the full text of the 7-day
              National Weather Service forecast for your hometown. Be sure to
              include all seven days.
            </p>

            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Source:</span>
              <div class="link-grid">
                <a
                  href="https://forecast.weather.gov"
                  target="_blank"
                  class="quick-link-btn"
                  >NWS Official Forecast<span class="hint-text"
                    >Type location ‚Üí Scroll down</span
                  ></a
                >
              </div>
            </div>

            <div style="padding: 6px 0">
              <input
                type="url"
                id="link4"
                name="link4"
                placeholder="Paste link to National Weather Service 7-day forecast for‚Ä¶"
              />
            </div>
            <div style="padding: 6px 0">
              <textarea
                id="caption4"
                name="caption4"
                rows="6"
                placeholder="Copy and paste the complete 7-day National Weather Service forecast for your hometown (include all seven days)‚Ä¶"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Q5 -->
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-blue"
            onclick="toggleCollapsible(this)"
          >
            Question 5: SPC Day 2 Outlook (3 pts)
          </div>
          <div class="collapsible-content">
            <p>
              <strong>Instructions:</strong> Provide an image of the Storm
              Prediction Center's Day 2 Convective Outlook map. This shows areas
              at risk for severe weather tomorrow.
            </p>

            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <div class="link-grid">
                <a
                  href="https://pivotalweather.com"
                  target="_blank"
                  class="quick-link-btn"
                  >Pivotal Weather<span class="hint-text">SPC Outlooks</span></a
                >
                <a
                  href="https://weather.cod.edu/"
                  target="_blank"
                  class="quick-link-btn"
                  >College of DuPage<span class="hint-text"
                    >SPC Outlooks</span
                  ></a
                >
                <a
                  href="https://spc.noaa.gov"
                  target="_blank"
                  class="quick-link-btn"
                  >SPC Official Outlook</a
                >
              </div>
            </div>

            <div style="padding: 6px 0">
              <input
                type="url"
                id="link5"
                name="link5"
                placeholder="Paste link to SPC Day 2 Outlook‚Ä¶"
              />
            </div>
            <div style="padding: 6px 0">
              <textarea
                id="caption5"
                name="caption5"
                placeholder="Describe the SPC Day 2 Outlook: What severe weather risks are forecast? Which areas have the highest probability? What types of severe weather (tornadoes, damaging winds, large hail) are most likely?"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Q6 -->
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-blue"
            onclick="toggleCollapsible(this)"
          >
            Question 6: WPC QPF Forecast (3 pts)
          </div>
          <div class="collapsible-content">
            <p>
              <strong>Instructions:</strong> Link to a Weather Prediction Center
              Quantitative Precipitation Forecast (QPF) map for any time period
              (e.g., 6-hr, 24-hr, or 7-day total).
            </p>

            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <div class="link-grid">
                <a
                  href="https://pivotalweather.com"
                  target="_blank"
                  class="quick-link-btn"
                  >Pivotal Weather<span class="hint-text">WPC QPF</span></a
                >
                <a
                  href="https://weather.cod.edu/"
                  target="_blank"
                  class="quick-link-btn"
                  >College of DuPage<span class="hint-text">WPC QPF</span></a
                >
                <a
                  href="https://wpc.ncep.noaa.gov"
                  target="_blank"
                  class="quick-link-btn"
                  >WPC Official QPF</a
                >
              </div>
            </div>

            <div style="padding: 6px 0">
              <input
                type="url"
                id="link6"
                name="link6"
                placeholder="Paste link to WPC QPF forecast map (6-hr, 24-hr, or 7-day total)‚Ä¶"
              />
            </div>
            <div style="padding: 6px 0">
              <textarea
                id="caption6"
                name="caption6"
                placeholder="Describe the QPF forecast: What time period does it cover? What precipitation amounts are predicted and where?"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Q7 -->
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-blue"
            onclick="toggleCollapsible(this)"
          >
            Question 7: Ensemble Forecast Probability (3 pts)
          </div>
          <div class="collapsible-content">
            <p>
              <strong>Instructions:</strong> Find an ensemble model forecast map
              showing the probability of snowfall or precipitation for a region
              in the U.S.
            </p>

            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <div class="link-grid">
                <a
                  href="https://pivotalweather.com"
                  target="_blank"
                  class="quick-link-btn"
                  >Pivotal Weather<span class="hint-text">GEFS Models</span></a
                >
                <a
                  href="https://weather.cod.edu/"
                  target="_blank"
                  class="quick-link-btn"
                  >College of DuPage<span class="hint-text"
                    >Weather Data ‚Üí Numerical Models</span
                  ></a
                >
              </div>
            </div>

            <div style="padding: 6px 0">
              <input
                type="url"
                id="link7"
                name="link7"
                placeholder="Paste link to ensemble model forecast showing probability of snowfall or precipitation‚Ä¶"
              />
            </div>
            <div style="padding: 6px 0">
              <textarea
                id="caption7"
                name="caption7"
                placeholder="Describe the ensemble forecast: What region and probability percentages are shown? Is this for snow or precipitation?"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Q8 -->
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-blue"
            onclick="toggleCollapsible(this)"
          >
            Question 8: Model Precipitation Forecast (3 pts)
          </div>
          <div class="collapsible-content">
            <p>
              <strong>Instructions:</strong> Submit a precipitation forecast map
              from any weather model (e.g., GFS, NAM, ECMWF) for any region/time
              period.
            </p>

            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <div class="link-grid">
                <a
                  href="https://pivotalweather.com"
                  target="_blank"
                  class="quick-link-btn"
                  >Pivotal Weather<span class="hint-text">HRRR Model</span></a
                >
                <a
                  href="https://weather.cod.edu/"
                  target="_blank"
                  class="quick-link-btn"
                  >College of DuPage<span class="hint-text"
                    >Weather Data ‚Üí Numerical Models</span
                  ></a
                >
              </div>
            </div>

            <div style="padding: 6px 0">
              <input
                type="url"
                id="link8"
                name="link8"
                placeholder="Paste link to weather model precipitation forecast (GFS, NAM, ECMWF, etc.)‚Ä¶"
              />
            </div>
            <div style="padding: 6px 0">
              <textarea
                id="caption8"
                name="caption8"
                placeholder="Describe the model forecast: Which weather model is this? What region and time period? What precipitation amounts are predicted?"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Q9 -->
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-blue"
            onclick="toggleCollapsible(this)"
          >
            Question 9: 500 mb Heights and Winds ‚Äì Central U.S. (3 pts)
          </div>
          <div class="collapsible-content">
            <p>
              <strong>Instructions:</strong> Find a forecast map of 500 mb
              heights and winds covering the central U.S. Look for color
              contours and wind barbs.
            </p>

            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <div class="link-grid">
                <a
                  href="https://pivotalweather.com"
                  target="_blank"
                  class="quick-link-btn"
                  >Pivotal Weather<span class="hint-text">GFS Model</span></a
                >
                <a
                  href="https://weather.cod.edu/"
                  target="_blank"
                  class="quick-link-btn"
                  >College of DuPage<span class="hint-text">Upper Air</span></a
                >
                <a
                  href="https://mag.ncep.noaa.gov"
                  target="_blank"
                  class="quick-link-btn"
                  >Model Analysis</a
                >
              </div>
            </div>

            <div style="padding: 6px 0">
              <input
                type="url"
                id="link9"
                name="link9"
                placeholder="Paste link to 500 mb heights and winds forecast map covering the central U.S.‚Ä¶"
              />
            </div>
            <div style="padding: 6px 0">
              <textarea
                id="caption9"
                name="caption9"
                placeholder="Describe the 500 mb map: What patterns do you see in the height contours? What are the wind speeds and directions shown by the wind barbs?"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Q10 -->
        <div class="collapsible-container">
          <div
            class="collapsible-header stripe-blue"
            onclick="toggleCollapsible(this)"
          >
            Question 10: Visible Satellite Imagery (3 pts)
          </div>
          <div class="collapsible-content">
            <p>
              <strong>Instructions:</strong> Provide a daytime
              <b>visible</b> satellite image over some interesting weather
              feature or phenomenon. Ensure the image is from a time when the
              sun is up.
            </p>

            <div class="quick-links">
              <span class="quick-links-title">üîó Recommended Sources:</span>
              <div class="link-grid">
                <a
                  href="https://pivotalweather.com"
                  target="_blank"
                  class="quick-link-btn"
                  >Pivotal Weather<span class="hint-text"
                    >GOES Satellite</span
                  ></a
                >
                <a
                  href="https://weather.cod.edu/"
                  target="_blank"
                  class="quick-link-btn"
                  >College of DuPage<span class="hint-text"
                    >Satellite & Radar</span
                  ></a
                >
                <a
                  href="https://star.nesdis.noaa.gov"
                  target="_blank"
                  class="quick-link-btn"
                  >NOAA STAR</a
                >
              </div>
            </div>

            <div style="padding: 6px 0">
              <input
                type="url"
                id="link10"
                name="link10"
                placeholder="Paste link to current visible satellite image‚Ä¶"
              />
            </div>
            <div style="padding: 6px 0">
              <textarea
                id="caption10"
                name="caption10"
                placeholder="Describe the visible satellite image: What weather features are visible? What cloud patterns do you observe? Can you identify any storms, cloud types, or clear areas?"
              ></textarea>
            </div>
          </div>
        </div>

        <!-- Buttons -->
        <div class="button-row">
          <button type="button" class="btn btn-primary" id="downloadBtn">
            üì• Download file for Canvas Submission
          </button>
          <button type="button" class="btn btn-ghost" id="clearBtn">
            üóëÔ∏è Clear All Answers
          </button>
          <button
            type="button"
            class="btn btn-primary"
            onclick="window.location.href='mailto:JMartinelli@peru.edu?subject=Lab 2 - Question/Feedback&body=Hi Dr. M,%0D%0A%0D%0AI have a question about Lab 2:%0D%0A%0D%0A'"
          >
            ‚ùì Questions, concerns, feedback, or need help?
          </button>
        </div>
      </form>
    </div>

    <script>
      /* ---------- Progress ---------- */
      function updateProgress() {
        let earned = 0,
          total = 30,
          per = 3;
        for (let i = 1; i <= 10; i++) {
          const link = document.getElementById(`link${i}`).value.trim();
          const caption = document.getElementById(`caption${i}`).value.trim();
          if (link && caption) earned += per;
        }
        document.getElementById("progressFill").style.width =
          (earned / total) * 100 + "%";
      }
      document
        .querySelectorAll("input,textarea")
        .forEach((el) => el.addEventListener("input", updateProgress));

      /* ---------- Validation ---------- */
      function validateAllInputs() {
        const urlRx = /^https?:\/\/.+/i;
        let ok = true,
          firstBad = null;
        const emptyL = [],
          badL = [],
          emptyC = [],
          shortC = [];
        const nums = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

        nums.forEach((n) => {
          const link = document.getElementById(`link${n}`);
          const cap = document.getElementById(`caption${n}`);
          const lv = link.value.trim(),
            cv = cap.value.trim();

          link.classList.remove("is-invalid");
          cap.classList.remove("is-invalid");

          if (!lv) {
            emptyL.push(n);
            link.classList.add("is-invalid");
            ok = false;
            if (!firstBad) firstBad = link;
          } else if (!urlRx.test(lv)) {
            badL.push(n);
            link.classList.add("is-invalid");
            ok = false;
            if (!firstBad) firstBad = link;
          }

          if (!cv) {
            emptyC.push(n);
            cap.classList.add("is-invalid");
            ok = false;
            if (!firstBad) firstBad = cap;
          } else if (cv.length < 20) {
            shortC.push(n);
            cap.classList.add("is-invalid");
            ok = false;
            if (!firstBad) firstBad = cap;
          }
        });

        if (!ok) {
          let msg = "Please complete the following before downloading:\n\n";
          if (emptyL.length)
            msg += `Missing links for item(s): ${emptyL.join(", ")}\n`;
          if (badL.length)
            msg += `Invalid URL format for item(s): ${badL.join(
              ", "
            )} (must start with http:// or https://)\n`;
          if (emptyC.length)
            msg += `Missing captions for item(s): ${emptyC.join(", ")}\n`;
          if (shortC.length)
            msg += `Caption(s) too short (need at least 20 characters) for item(s): ${shortC.join(
              ", "
            )}\n`;
          alert(msg);
          if (firstBad) {
            firstBad.scrollIntoView({ behavior: "smooth", block: "center" });
            firstBad.focus();
          }
        }
        return ok;
      }

      /* ---------- Download ---------- */
      document.getElementById("downloadBtn").addEventListener("click", () => {
        if (!validateAllInputs()) return;

        const items = [
          { title: "Satellite Image ‚Äì Minnesota", num: 1 },
          { title: "Radar Image ‚Äì Chicago", num: 2 },
          { title: "Surface Observations ‚Äì Kansas", num: 3 },
          { title: "7-Day Forecast ‚Äì Fargo, ND", num: 4 },
          { title: "SPC Day 2 Outlook", num: 5 },
          { title: "WPC QPF Forecast", num: 6 },
          { title: "Ensemble Forecast Probability", num: 7 },
          { title: "Model Precipitation Forecast", num: 8 },
          { title: "500 mb Heights and Winds ‚Äì Central U.S.", num: 9 },
          { title: "Visible Satellite ‚Äì Southeast U.S.", num: 10 },
        ];

        let content = "LAB 2: WEATHER FORECASTING TOOLS\n";
        content += "====================================================\n\n";
        content += "Date: " + new Date().toLocaleDateString() + "\n\n";
        content += "====================================================\n\n";

        items.forEach((item) => {
          const link = document.getElementById(`link${item.num}`).value.trim();
          const cap = document
            .getElementById(`caption${item.num}`)
            .value.trim();
          content += `${item.num}. ${item.title}\n`;
          content += "-".repeat(50) + "\n";
          content += `Link: ${link || "[NOT PROVIDED]"}\n\n`;
          content += `Caption:\n${cap || "[NOT PROVIDED]"}\n\n`;
          content += "====================================================\n\n";
        });

        const blob = new Blob([content], { type: "text/plain" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "Lab02_WeatherData.txt";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
        alert("‚úÖ Assignment downloaded successfully!");
      });

      /* ---------- Clear ---------- */
      document.getElementById("clearBtn").addEventListener("click", () => {
        if (
          confirm(
            "Are you sure you want to clear all fields? This cannot be undone."
          )
        ) {
          document.getElementById("weatherForm").reset();
          updateProgress();
          alert("üóëÔ∏è All fields have been cleared.");
        }
      });

      /* ---------- Collapsibles ---------- */
      function toggleCollapsible(header) {
        const content = header.nextElementSibling;
        const collapsed = content.classList.toggle("is-collapsed");
        header.classList.toggle("is-collapsed", collapsed);
      }

      // Default: everything OPEN (change to true to start closed)
      document.querySelectorAll(".collapsible-header").forEach((h) => {
        const startClosed = false;
        if (startClosed) {
          h.classList.add("is-collapsed");
          const c = h.nextElementSibling;
          if (c) c.classList.add("is-collapsed");
        }
      });

      // Initialize progress
      updateProgress();
    </script>
  </body>
</html>
